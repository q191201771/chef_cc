CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

SET(CMAKE_EXPORT_COMPILE_COMMANDS 1)
SET(ROOT_DIR ../)

ADD_DEFINITIONS("-g -O2 -Wall -Werror -Wcast-align")

PROJECT(chef)

GET_FILENAME_COMPONENT(ROOT_DIR "${ROOT_DIR}" ABSOLUTE)

SET(CMAKE_CXX_FLAGS "-std=c++11 -static-libstdc++")
SET(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)
SET(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/lib})

ADD_SUBDIRECTORY(chef_io)
ADD_SUBDIRECTORY(chef_base)
ADD_SUBDIRECTORY(test_chef_io)

IF(TEST_CHEF_BASE)
    ADD_SUBDIRECTORY(test_chef_base)
ENDIF(TEST_CHEF_BASE)

find_package(Protobuf)
if(PROTOBUF_FOUND)
    ADD_SUBDIRECTORY(demo_chat)
endif()

